{% extends 'base.html' %}

{% load humanize %}
{% load i18n %}
{% load static %}

{% block title %}Blog{% endblock title %}

{% block pageheader %}
<div class="page-header header-filter header-small" {% if blogcover %}style="background-image: url('{{ blogcover.image }}'); transform: translate3d(0px, 0px, 0px);"{% endif %}>
    <div class="container">
        <div class="row">
            <div class="col-md-8 ml-auto mr-auto text-center">
                <h2 class="title">Diventi Blog</h2>
                <h4>{% trans "Our Latest Stories" %}.</h4>
            </div>
        </div>
    </div>
</div>
{% endblock pageheader %}

{% block content %}
<div class="section">
    <div class="container">
        <div class="row">
            {% for article in articles %}                    
                <div class="{% if article.hot %}col-md-12{% else %}col-md-6{% endif %}">
                    <div class="card card-raised card-background" style="background-image: url({{ article.image }})">
                        <div class="card-body">
                            <h6 class="card-category text-info">{{ article.category }}</h6>
                            <h3 class="card-title">{{ article.title|capfirst }}</h3>
                            <p class="card-description">
                                {{ article.description|striptags }}
                            </p>
                            <a href="{% url 'blog:detail' article.slug %}" class="btn btn-warning btn-round">
                                <i class="fal fa-align-left fa-fw fa-lg"></i> {% trans "read article" %}
                            </a>
                        </div>
                    </div>
                </div>    
                {% empty %}
                <div class="text-center">
                    <h3>{% trans "There are no posts yet" %} <i class="fal fa-frown"></i></h3>
                </div>
            {% endfor %}
        </div> <!-- End row -->
        {% if is_paginated %}
            <br>
            <div class="row">
                <div class="col-md-12">
                    <ul class="pagination pagination-warning" style="justify-content: center;">
                    {% if page_obj.has_previous %}
                      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">{% trans "Previous" %}</a></li>
                    {% else %}
                      <li class="page-item disabled"><span class="page-link">{% trans "Previous" %}</span></li>
                    {% endif %}
                    {% for i in page_obj.paginator.page_range %}
                      {% if page_obj.number == i %}
                        <li class="page-item active"><span class="page-link">{{ i }} <span class="sr-only">({% trans "current" %})</span></span></li>
                      {% else %}
                        <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                      {% endif %}
                    {% endfor %}
                    {% if page_obj.has_next %}
                      <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">{% trans "Next" %}</a></li>
                    {% else %}
                      <li class="page-item disabled"><span class="page-link">{% trans "Next" %}</span></li>
                    {% endif %}
                    </ul>
                </div>
            </div>
        {% endif %}
    </div> <!-- End container -->
</div> <!-- End section -->
{% endblock content %}