{% extends 'base.html' %}

{% load humanize %}
{% load i18n %}
{% load static %}

{% block title %}Blog{% endblock title %}

{% block bodyclass %}blog-posts sidebar-collapse{% endblock bodyclass %}

{% block pageheader %}
    <div class="page-header header-filter header-small" data-parallax="true" {% if blogcover %}style="background-image: url('{{ blogcover.image }}');"{% endif %}>
        <div class="container">
            <div class="row">
                <div class="col-md-8 ml-auto mr-auto text-center">
                    <h2 class="title">{% trans "Our latest stories" %}</h2>
                    <h4>{% trans "Welcome to Diventi blog. You've reached the front page for news on roleplaying, collaborative storytelling and Diventi related announcements" %}. </h4>
                </div>
            </div>
        </div>
    </div>
{% endblock pageheader %}

{% block maincontainer %}
<div class="section">
    <div class="row">
        <div class="col-md-8 ml-auto mr-auto">
            {% for article in articles %}
                <div class="card card-plain card-blog">
                    <div class="card-header card-header-image">
                        <a href="{% url 'blog:detail' article.slug %}">
                            <img class="img img-raised" src="{{ article.image }}">
                        </a>
                    <div class="colored-shadow colored-shadow-big" style="background-image: url(&quot;https://demos.creative-tim.com/material-kit-pro/assets/img/bg5.jpg&quot;); opacity: 1;"></div></div>
                    <div class="card-body">
                        <h6 class="card-category {% if article.hot %}text-danger{% else %}text-info{% endif %}">
                            {% if article.hot %}<i class="fal fa-fire fa-lg"></i>{% endif %} {{ article.category }} 
                        </h6>
                        <h3 class="card-title">
                            <a href="{% url 'blog:detail' article.slug %}">{{ article.title|capfirst }}</a>
                        </h3>
                        <h5 class="card-description">
                            {{ article.content|striptags|safe|truncatechars:200 }}
                        </h5>
                        <a href="{% url 'blog:detail' article.slug %}" class="btn btn-primary btn-warning btn-round">{% trans "read article" %}</a>
                    </div>
                </div>
                {% empty %}
                <div class="text-center">
                    <h3>{% trans "There are no posts yet" %} <i class="fal fa-frown"></i></h3>
                </div>
            {% endfor %}

            {% if is_paginated %}
                <br>
                <div class="row">
                    <div class="col-md-12">
                        <ul class="pagination pagination-warning" style="justify-content: center;">
                        {% if page_obj.has_previous %}
                          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">{% trans "Previous" %}</a></li>
                        {% else %}
                          <li class="page-item disabled"><span class="page-link">{% trans "Previous" %}</span></li>
                        {% endif %}
                        {% for i in page_obj.paginator.page_range %}
                          {% if page_obj.number == i %}
                            <li class="page-item active"><span class="page-link">{{ i }} <span class="sr-only">({% trans "current" %})</span></span></li>
                          {% else %}
                            <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                          {% endif %}
                        {% endfor %}
                        {% if page_obj.has_next %}
                          <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">{% trans "Next" %}</a></li>
                        {% else %}
                          <li class="page-item disabled"><span class="page-link">{% trans "Next" %}</span></li>
                        {% endif %}
                        </ul>
                    </div>
                </div>
            {% endif %}

        </div>
    </div>
</div>
{% endblock maincontainer %}